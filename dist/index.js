module.exports=function(e){var t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(n,o,function(t){return e[t]}.bind(null,o));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=0)}([function(e,t,r){"use strict";var n=r(1),o=n(r(2)),s=n(r(3)),i=n(r(4)),a=r(5),c=r(6),u=r(7);t.plugin={name:u.name,version:u.version,pkg:u,register:function(e,t){t=a.applyToDefaults({socket:{path:"/socket.io"}},t),e=t.label?e.select(t.label):e;var r=c(e.listener,t.socket);t.adapter&&r.adapter(t.adapter),e.expose("io",r);var n={};n["/"]=r.of("/"),Array.isArray(t.namespaces)&&t.namespaces.forEach(function(e){n[e]=r.of(e)});Object.keys(n).forEach(function(t){n[t].on("connection",function(n){e.table().forEach(function(a){if(function(e){return"object"===(0,i.default)(e)&&"object"===(0,i.default)(e.settings)&&"object"===(0,i.default)(e.settings.plugins)&&void 0!==e.settings.plugins.websocket}(a)){if("POST"!==a.method.toUpperCase())throw new Error("WebSocket protocol can be enabled on POST routes only");var c=a.settings.plugins.websocket,u="string"==typeof c,p=u?c:c.event;(!u&&c.namespace?c.namespace:"/")===t&&n.on(p,function(){var t=(0,s.default)(o.default.mark(function t(s,i){var u,l,b,f,d;return o.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return u=n.request,delete(l=Object.assign({},u.headers))["accept-encoding"],b=JSON.stringify(s),t.next=6,e.inject({method:"POST",url:a.path||"/",headers:l,remoteAddress:u.address,payload:b,plugins:{websocket:{mode:"websocket",io:r,socket:n,req:u}}});case 6:if(f=t.sent,d={io:r,socket:n,event:p,data:s,req:u,res:f,result:f.result},!c.emit){t.next=10;break}return t.abrupt("return",c.emit(d,i));case 10:i(f.result);case 11:case"end":return t.stop()}},t)}));return function(e,r){return t.apply(this,arguments)}}())}})})}),e.decorate("request","websocket",function(e){return function(e){return"object"===(0,i.default)(e)&&"object"===(0,i.default)(e.plugins)&&"object"===(0,i.default)(e.plugins.websocket)&&"websocket"===e.plugins.websocket.mode}(e)?e.plugins.websocket:{mode:"http"}},{apply:!0})}}},function(e,t){e.exports=require("@babel/runtime/helpers/interopRequireDefault")},function(e,t){e.exports=require("@babel/runtime/regenerator")},function(e,t){e.exports=require("@babel/runtime/helpers/asyncToGenerator")},function(e,t){e.exports=require("@babel/runtime/helpers/typeof")},function(e,t){e.exports=require("hoek")},function(e,t){e.exports=require("socket.io")},function(e){e.exports={name:"hapi-websocket",version:"1.0.0",description:"Hapi plugin integration by injecting WebSocket/Socket.io messages as HTTP request",main:"./dist/index.js",scripts:{dev:"cross-env NODE_ENV=development webpack --progress --watch --colors",prod:"cross-env NODE_ENV=production webpack -p --progress --colors",test:"node ./src/test.js"},repository:{type:"git",url:"git+https://github.com/nasa8x/hapi-websocket.git"},keywords:["websocket","socketio"],author:"Nasa",license:"MIT",bugs:{url:"https://github.com/nasa8x/hapi-websocket/issues"},homepage:"https://github.com/nasa8x/hapi-websocket#readme",dependencies:{hapi:"^18.1.0",hoek:"^6.1.3",inert:"^5.1.3","socket.io":"^2.2.0"},devDependencies:{"@babel/core":"^7.1.2","@babel/preset-env":"^7.1.0","@babel/plugin-proposal-class-properties":"^7.4.0","@babel/plugin-syntax-dynamic-import":"^7.2.0","@babel/plugin-transform-runtime":"^7.4.3","@babel/runtime":"^7.4.3","babel-loader":"^8.0.5","clean-webpack-plugin":"^2.0.1","cross-env":"^5.2.0","uglifyjs-webpack-plugin":"^1.3.0",webpack:"^4.30.0","webpack-cli":"^3.3.0","webpack-node-externals":"^1.6.0"}}}]);