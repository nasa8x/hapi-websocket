module.exports=function(e){var t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(n,o,function(t){return e[t]}.bind(null,o));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=0)}([function(e,t,r){"use strict";var n=c(r(1)),o=c(r(2)),s=c(r(3)),i=c(r(4)),a=c(r(5)),u=c(r(6));function c(e){return e&&e.__esModule?e:{default:e}}var p=r(7),l=r(8),b=r(9);t.plugin={name:b.name,version:b.version,pkg:b,register:function(e,t){t=p.applyToDefaults({socket:{path:"/socket.io"}},t),e=t.label?e.select(t.label):e;var r=l(e.listener,t.socket);e.expose("io",r);var c={};c["/"]=r.of("/"),Array.isArray(t.namespaces)&&t.namespaces.forEach(function(e){c[e]=r.of(e)});(0,a.default)(c).forEach(function(t){c[t].on("connection",function(a){e.table().forEach(function(c){var p=this;if(function(e){return"object"===(void 0===e?"undefined":(0,u.default)(e))&&"object"===(0,u.default)(e.settings)&&"object"===(0,u.default)(e.settings.plugins)&&void 0!==e.settings.plugins.websocket}(c)){if("POST"!==c.method.toUpperCase())throw new Error("WebSocket protocol can be enabled on POST routes only");var l=c.settings.plugins.websocket,b="string"==typeof l,f=b?l:l.event;(!b&&l.namespace?l.namespace:"/")===t&&a.on(f,function(){var t=(0,i.default)(n.default.mark(function t(i,u){var b,d,g,m,k;return n.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return b=a.request,delete(d=(0,s.default)({},b.headers))["accept-encoding"],g=(0,o.default)(i),t.next=6,e.inject({method:"POST",url:c.path||"/",headers:d,remoteAddress:b.address,payload:g,plugins:{websocket:{mode:"websocket",io:r,socket:a,req:b}}});case 6:if(m=t.sent,k={io:r,socket:a,event:f,data:i,req:b,res:m,result:m.result},!l.emit){t.next=10;break}return t.abrupt("return",l.emit(k,u));case 10:u(m.result);case 11:case"end":return t.stop()}},t,p)}));return function(e,r){return t.apply(this,arguments)}}())}})})}),e.decorate("request","websocket",function(e){return function(e){return"object"===(void 0===e?"undefined":(0,u.default)(e))&&"object"===(0,u.default)(e.plugins)&&"object"===(0,u.default)(e.plugins.websocket)&&"websocket"===e.plugins.websocket.mode}(e)?e.plugins.websocket:{mode:"http"}},{apply:!0})}}},function(e,t){e.exports=require("babel-runtime/regenerator")},function(e,t){e.exports=require("babel-runtime/core-js/json/stringify")},function(e,t){e.exports=require("babel-runtime/core-js/object/assign")},function(e,t){e.exports=require("babel-runtime/helpers/asyncToGenerator")},function(e,t){e.exports=require("babel-runtime/core-js/object/keys")},function(e,t){e.exports=require("babel-runtime/helpers/typeof")},function(e,t){e.exports=require("hoek")},function(e,t){e.exports=require("socket.io")},function(e){e.exports={name:"hapi-websocket",version:"1.0.0",description:"Hapi plugin integration by injecting WebSocket/Socket.io messages as HTTP request",main:"./dist/index.js",scripts:{dev:"cross-env NODE_ENV=development webpack --progress --watch --colors",prod:"cross-env NODE_ENV=production webpack -p --progress --colors",test:"node ./src/test.js"},repository:{type:"git",url:"git+https://github.com/nasa8x/hapi-websocket.git"},keywords:["websocket","socketio"],author:"Nasa",license:"MIT",bugs:{url:"https://github.com/nasa8x/hapi-websocket/issues"},homepage:"https://github.com/nasa8x/hapi-websocket#readme",dependencies:{hapi:"^17.5.3",hoek:"^5.0.3",inert:"^5.1.0","socket.io":"^2.1.1"},devDependencies:{"babel-core":"^6.26.3","babel-loader":"^7.1.2","babel-plugin-syntax-dynamic-import":"^6.18.0","babel-plugin-transform-async-to-generator":"^6.24.1","babel-plugin-transform-runtime":"^6.23.0","babel-preset-env":"^1.6.1","babel-preset-es2015":"^6.24.1","babel-preset-stage-0":"^6.24.1","babel-preset-stage-2":"^6.24.1","clean-webpack-plugin":"^0.1.19","cross-env":"^5.2.0","uglifyjs-webpack-plugin":"^1.2.5",webpack:"^4.6.0","webpack-cli":"^3.1.0","webpack-node-externals":"^1.6.0"}}}]);